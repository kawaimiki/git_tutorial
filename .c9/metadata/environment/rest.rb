{"filter":false,"title":"rest.rb","tooltip":"/rest.rb","ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":3,"column":26},"end":{"row":3,"column":26},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"hash":"b59a7bbc4370a5806c72195e6390780f40900ecc","mime":"text/x-script.ruby","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":32,"column":25},"action":"insert","lines":["require 'net/http'","require 'json'","","KEYID = \"2e9d0e66c5b9c946\"","COUNT = 100","PREF = \"Z011\"","FREEWORD = \"渋谷駅\"","FORMAT = \"json\"","PARAMS = {\"key\": KEYID, \"count\": COUNT, \"large_area\": PREF, \"keyword\": FREEWORD, \"format\": FORMAT}","","def write_data_to_csv(params)","    restaurants = []","    uri = URI.parse(\"http://webservice.recruit.co.jp/hotpepper/gourmet/v1/\")","    uri.query = URI.encode_www_form(PARAMS)  ","    json_res = Net::HTTP.get uri","    ","    response = JSON.load(json_res)","    ","    if response.has_key?(\"error\") then","        puts \"エラーが発生しました！\"","    end","    for restaurant in response[\"results\"][\"shop\"] do","        rest_name = restaurant[\"name\"]","        restaurants.append(rest_name)","    end","    ","    File.open(\"restaurants_list.csv\", \"w\") do |file|","        file << restaurants","    end","    return puts restaurants","end","","write_data_to_csv(PARAMS)"],"id":1}]]},"timestamp":1627010708254}